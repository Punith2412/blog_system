{% extends "base.html" %}

{% block title %}Search: {{ query }} - {{ config.BLOG_TITLE }}{% endblock %}

{% block extra_css %}
<style>
    .search-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 60px 20px; text-align: center; color: white; }
    .search-header h1 { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 12px; }
    .search-header p { opacity: 0.9; }
    .search-results { max-width: 800px; margin: 0 auto; padding: 60px 20px; }
    .search-result { display: flex; gap: 20px; padding: 24px; background: white; border-radius: 12px; margin-bottom: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    .search-result-image { width: 120px; height: 80px; border-radius: 8px; flex-shrink: 0; background: linear-gradient(135deg, #667eea, #764ba2); }
    .search-result-image img { width: 100%; height: 100%; object-fit: cover; border-radius: 8px; }
    .search-result-content { flex: 1; }
    .search-result-category { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; margin-bottom: 8px; }
    .search-result-title { font-family: 'Playfair Display', serif; font-size: 1.25rem; margin-bottom: 8px; }
    .search-result-title a { color: #1e293b; transition: color 0.3s; }
    .search-result-title a:hover { color: #667eea; }
    .search-result-excerpt { color: #64748b; font-size: 0.9rem; line-height: 1.6; }
    .search-result-meta { font-size: 0.8rem; color: #94a3b8; margin-top: 12px; }
    .no-results { text-align: center; padding: 60px 20px; }
    .no-results h2 { font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 16px; }
    .no-results p { color: #64748b; margin-bottom: 24px; }
    .search-box { max-width: 500px; margin: 0 auto; display: flex; gap: 12px; }
    .search-box input { flex: 1; padding: 14px 20px; border: none; border-radius: 10px; font-size: 1rem; }
    .search-box button { padding: 14px 24px; background: #667eea; color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; }
    @media (max-width: 768px) { .search-result { flex-direction: column; } .search-result-image { width: 100%; height: 150px; } }
</style>
{% endblock %}

{% block content %}
<div class="search-header">
    <h1>Search Results</h1>
    <p>Found {{ posts|length }} results for "{{ query }}"</p>
</div>
<div class="search-results">
    {% if posts %}
        {% for post in posts %}
        <article class="search-result">
            {% if post.featured_image %}
            <div class="search-result-image"><img src="{{ post.featured_image }}" alt="{{ post.title }}"></div>
            {% else %}
            <div class="search-result-image" style="background: linear-gradient(135deg, {{ post.category_color }}, {{ post.category_color }}aa);"></div>
            {% endif %}
            <div class="search-result-content">
                <span class="search-result-category" style="background: {{ post.category_color }}20; color: {{ post.category_color }}">{{ post.category_name }}</span>
                <h2 class="search-result-title"><a href="{{ url_for('post', slug=post.slug) }}">{{ post.title }}</a></h2>
                <p class="search-result-excerpt">{{ post.excerpt }}</p>
                <div class="search-result-meta">
                    {{ post.created_at.strftime('%B %d, %Y') }} â€¢ {{ post.views }} views
                </div>
            </div>
        </article>
        {% endfor %}
    {% else %}
    <div class="no-results">
        <h2>No results found</h2>
        <p>We couldn't find any posts matching "{{ query }}". Try different keywords.</p>
        <form action="{{ url_for('search') }}" method="GET" class="search-box">
            <input type="text" name="q" placeholder="Search again..." value="{{ query }}">
            <button type="submit">Search</button>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}